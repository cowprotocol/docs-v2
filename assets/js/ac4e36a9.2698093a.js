"use strict";(self.webpackChunkcow_docs=self.webpackChunkcow_docs||[]).push([[2148],{3905:(e,t,o)=>{o.d(t,{Zo:()=>u,kt:()=>v});var r=o(7294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var i=r.createContext({}),c=function(e){var t=r.useContext(i),o=t;return e&&(o="function"==typeof e?e(t):l(l({},t),e)),o},u=function(e){var t=c(e.components);return r.createElement(i.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var o=e.components,n=e.mdxType,a=e.originalType,i=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(o),h=n,v=p["".concat(i,".").concat(h)]||p[h]||d[h]||a;return o?r.createElement(v,l(l({ref:t},u),{},{components:o})):r.createElement(v,l({ref:t},u))}));function v(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=o.length,l=new Array(a);l[0]=h;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[p]="string"==typeof e?e:n,l[1]=s;for(var c=2;c<a;c++)l[c]=o[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,o)}h.displayName="MDXCreateElement"},4742:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var r=o(7462),n=(o(7294),o(3905));const a={},l="How to test a solver locally",s={unversionedId:"solvers/how-to-build-a-solver/how-to-test-a-solver-locally",id:"solvers/how-to-build-a-solver/how-to-test-a-solver-locally",title:"How to test a solver locally",description:"In this short tutorial, we describe the steps needed in order to set up the Driver locally and allow a custom Solver to interact with it.",source:"@site/docs/solvers/how-to-build-a-solver/how-to-test-a-solver-locally.md",sourceDirName:"solvers/how-to-build-a-solver",slug:"/solvers/how-to-build-a-solver/how-to-test-a-solver-locally",permalink:"/docs-v2/docs/solvers/how-to-build-a-solver/how-to-test-a-solver-locally",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/solvers/how-to-build-a-solver/how-to-test-a-solver-locally.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"How to Build a Solver",permalink:"/docs-v2/docs/solvers/how-to-build-a-solver/"},next:{title:"How to write a solver",permalink:"/docs-v2/docs/solvers/how-to-build-a-solver/how-to-write-a-solver"}},i={},c=[{value:"Installing Rust",id:"installing-rust",level:3},{value:"Driver setup",id:"driver-setup",level:3},{value:"Solver deployment",id:"solver-deployment",level:3}],u={toc:c},p="wrapper";function d(e){let{components:t,...o}=e;return(0,n.kt)(p,(0,r.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"how-to-test-a-solver-locally"},"How to test a solver locally"),(0,n.kt)("p",null,"In this short tutorial, we describe the steps needed in order to set up the ",(0,n.kt)("em",{parentName:"p"},"Driver")," locally and allow a custom ",(0,n.kt)("em",{parentName:"p"},"Solver")," to interact with it."),(0,n.kt)("h3",{id:"installing-rust"},"Installing Rust"),(0,n.kt)("p",null,"The first step is to install Rust by using the Rustup tool. We strongly encourage the reader to follow the steps described here:"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://www.rust-lang.org/learn/get-started"},"https://www.rust-lang.org/learn/get-started")),(0,n.kt)("p",null,"Once we are done with the installation, we turn to the Driver setup."),(0,n.kt)("h3",{id:"driver-setup"},"Driver setup"),(0,n.kt)("p",null,"Reading the state of the blockchain requires issuing RPC calls to an Ethereum node. The simplest way to do so is by using a third party service like ",(0,n.kt)("a",{parentName:"p",href:"https://infura.io/"},"Infura"),' to get access to an Ethereum node; thus, in this tutorial we use Infura. After registering for a free Infura account, Infura offers "endpoints" for the Mainnet and different testnets. We will refer to those as node-urls. Since the CoW Protocol only runs on Mainnet, Rinkeby and GnosisChain, we need to select one of those.'),(0,n.kt)("p",null,"In order to start the Driver, we can execute the following command in a terminal:\\\n\\\n",(0,n.kt)("inlineCode",{parentName:"p"},"cargo run -p solver -- --orderbook-url")," ",(0,n.kt)("a",{parentName:"p",href:"https://api.cow.fi/mainnet"},(0,n.kt)("inlineCode",{parentName:"a"},"https://api.cow.fi/mainnet")),"`","`","\\\n",(0,n.kt)("inlineCode",{parentName:"p"},'--node-url "https://mainnet.infura.io/v3/<INFURA_KEY>"'),"\\\n",(0,n.kt)("inlineCode",{parentName:"p"},'--cow-dex-ag-solver-url "http://127.0.0.1:8000"'),"\\\n",(0,n.kt)("inlineCode",{parentName:"p"},"--solver-account 0xa6DDBD0dE6B310819b49f680F65871beE85f517e"),"\\\n",(0,n.kt)("inlineCode",{parentName:"p"},"--solvers CowDexAg"),"\\\n",(0,n.kt)("inlineCode",{parentName:"p"},"--transaction-strategy DryRun")),(0,n.kt)("p",null,"where the ",(0,n.kt)("inlineCode",{parentName:"p"},"INFURA_KEY")," entry should be replaced with the key associated with our Infura account."),(0,n.kt)("p",null,"We clarify that the ",(0,n.kt)("inlineCode",{parentName:"p"},"cow-dex-ag-solver-url")," is just a placeholder flag that indicates where the http solver (i.e., a custom solver) receives requests (which, in our case, will be a localhost server whose IP address is the standard 127.0.0.1), and the ",(0,n.kt)("inlineCode",{parentName:"p"},"CowDexAg")," is just a dummy name for the solver we will use. These should not be edited!"),(0,n.kt)("h3",{id:"solver-deployment"},"Solver deployment"),(0,n.kt)("p",null,"Once the Driver is running, we can now locally deploy our solver server so that it can receive the instances from the Driver, solve them, and then report back the solution to the Driver. The solver receives the instance in JSON format (as described ",(0,n.kt)("a",{parentName:"p",href:"../in-depth-solver-specification/"},"here"),") via an HTTP Get request, solves the instance and then, via an HTTP POST request, sends the solution (again in JSON format) to the Driver."),(0,n.kt)("p",null,"An example of a publicly available solver, namely the Dex Cow Solver, can be found here:"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://github.com/gnosis/cow-dex-solver"},"https://github.com/gnosis/cow-dex-solver")),(0,n.kt)("p",null,"You can follow the simple instructions of the Dex Cow Solver to locally deploy that particular solver."),(0,n.kt)("p",null,"For potential questions/issues regarding the testing of solvers, we also encourage everyone to contact our team in the CoW Swap Discord: ",(0,n.kt)("a",{parentName:"p",href:"https://discord.com/invite/cowprotocol"},"https://discord.com/invite/cowprotocol"),"\\\n","\\"))}d.isMDXComponent=!0}}]);